<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Loja do Operador</title>
  <link rel="icon" href="favicon.png" type="image/png">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap');

    /* ====== VARI√ÅVEIS CSS ====== */
    :root {
      --cor-primaria: #1a1a1a;
      --cor-secundaria: #f9a01b;
      --cor-terciaria: #2a2a2a;
      --texto-claro: #e0e0e0;
      --texto-escuro: #888;
      --borda: #444;
      --transition: all 0.3s ease;
    }

    /* ====== RESET E ESTILOS GERAIS ====== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: var(--cor-primaria);
      color: var(--texto-claro);
      line-height: 1.6;
    }

    /* ====== MENU TOPO ====== */
    .menu-topo {
      background: var(--cor-terciaria);
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: fixed;
      top: 0;
      width: 100%;
      z-index: 1000;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    }

    .menu-logo {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .logo-menu {
      height: 40px;
      width: auto;
    }

    .nome-site {
      font-family: 'Bebas Neue', sans-serif;
      letter-spacing: 1px;
      font-size: 1.5rem;
      font-weight: bold;
      color: var(--cor-secundaria);
    }

    .menu-toggle {
      display: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: var(--cor-secundaria);
    }

    .menu-links {
      display: flex;
      list-style: none;
      gap: 2rem;
    }

    .menu-links a {
      color: var(--texto-claro);
      text-decoration: none;
      transition: var(--transition);
      font-weight: 500;
    }

    .menu-links a:hover {
      color: var(--cor-secundaria);
    }

    /* ====== HEADER ====== */
    .header-reduzido {
      background: linear-gradient(135deg, var(--cor-terciaria) 0%, #333 100%);
      padding: 120px 2rem 60px;
      text-align: center;
      margin-top: 70px;
    }

    .titulo-principal {
      font-family: 'Bebas Neue', sans-serif;
      letter-spacing: 1px;
      font-size: 2.5rem;
      margin-bottom: 1rem;
      color: var(--cor-secundaria);
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
    }

    .subtitulo-min {
      font-family: 'Bebas Neue', sans-serif;
      letter-spacing: 1px;
      font-size: 1.1rem;
      color: var(--texto-claro);
      max-width: 600px;
      margin: 0 auto;
    }

    /* ====== CARROSSEL ====== */
    .carousel-section {
      padding: 4rem 2rem;
      background: var(--cor-primaria);
      border-radius: 10px;
      margin-top: 2rem;
    }

    .main-swiper {
      max-width: 1200px;
      margin: 0 auto;
    }

    .swiper-slide {
      background: var(--cor-terciaria);
      border-radius: 15px;
      overflow: hidden;
      transition: var(--transition);
      cursor: pointer;
      height: auto;
    }

    .swiper-slide:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(249, 160, 27, 0.2);
    }

    .slide-content {
      display: flex;
      flex-direction: column;
      height: 100%;
    }

    .slide-img {
      width: 100%;
      height: 250px;
      object-fit: cover;
    }

    .slide-caption {
      padding: 1.5rem;
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .slide-caption h3 {
      font-family: 'Bebas Neue', sans-serif;
      letter-spacing: 1px;
      color: var(--cor-secundaria);
      font-size: 1.3rem;
      margin-bottom: 0.5rem;
    }

    .slide-caption p {
      color: var(--texto-claro);
      flex-grow: 1;
      margin-bottom: 1rem;
    }

    .btn-selecionar-kit {
      background: var(--cor-secundaria);
      color: #000;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      transition: var(--transition);
      margin-top: auto;
    }

    .btn-selecionar-kit:hover {
      background: #ffb347;
      transform: scale(1.05);
    }

    .swiper-pagination-bullet-active {
      background: var(--cor-secundaria) !important;
    }

    /* ====== SELE√á√ÉO DE M√ÅQUINAS ====== */
    .maquinas-container {
      font-family: 'Bebas Neue', sans-serif;
      letter-spacing: 1px;
      padding: 4rem 2rem;
      background: var(--cor-terciaria);
      text-align: center;
      justify-content: center;
    }

    .maquinas-container h2 {
      font-family: 'Bebas Neue', sans-serif;
      letter-spacing: 1px;
      text-align: center;
      margin-bottom: 2rem;
      color: var(--cor-secundaria);
      font-size: 2rem;
    }

    .maquinas-scroll {
      display: flex;
      gap: 1.5rem;
      overflow-x: auto;
      padding: 1rem 0;
      scrollbar-width: thin;
      scrollbar-color: var(--cor-secundaria) var(--cor-primaria);
    }

    .maquinas-scroll::-webkit-scrollbar {
      height: 8px;
    }

    .maquinas-scroll::-webkit-scrollbar-track {
      background: var(--cor-primaria);
      border-radius: 10px;
    }

    .maquinas-scroll::-webkit-scrollbar-thumb {
      background: var(--cor-secundaria);
      border-radius: 10px;
    }

    .maquina-item {
      flex: 0 0 auto;
      width: 800px;
      text-align: center;
      cursor: pointer;
      transition: var(--transition);
      padding: 1rem;
      border-radius: 10px;
      background: var(--cor-primaria);
    }

    .maquina-item:hover {
      transform: scale(1.05);
      background: #333;
    }

    .maquina-item.selecionado {
      background: var(--cor-secundaria);
      color: #000;
    }

    .maquina-item img {
      width: 60px;
      height: 60px;
      object-fit: contain;
      margin-bottom: 0.5rem;
    }

    .maquina-item p {
      font-size: 0.9rem;
      font-weight: 500;
    }

    /* ====== DETALHES DA M√ÅQUINA ====== */
    .maquina-detalhes {
      margin-top: 2rem;
      padding: 2rem;
      margin-bottom: 2rem;
      background: var(--cor-primaria);
      border-radius: 10px;
      display: none;
    }

    .maquina-detalhes h3 {
      font-family: 'Bebas Neue', sans-serif;
      letter-spacing: 1px;
      color: var(--cor-secundaria);
      margin-bottom: 1rem;
    }

    .form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1rem;
    }

    .form-grid select {
      padding: 12px;
      border: 2px solid var(--borda);
      border-radius: 8px;
      background: var(--cor-terciaria);
      color: var(--texto-claro);
      font-size: 1rem;
      transition: var(--transition);
    }

    .form-grid select:focus {
      outline: none;
      border-color: var(--cor-secundaria);
    }

    /* ====== PERSONALIZA√á√ÉO ====== */
    #personalizacao-container {
      padding: 4rem 2rem;
      background: var(--cor-primaria);
      display: none;
    }

    #personalizacao-container h2 {
      font-family: 'Bebas Neue', sans-serif;
      letter-spacing: 1px;
      text-align: center;
      margin-bottom: 2rem;
      color: var(--cor-secundaria);
      font-size: 2rem;
    }

    #partes-personalizacao {
      max-width: 800px;
      margin: 0 auto;
      background: var(--cor-terciaria);
      padding: 2rem;
      border-radius: 10px;
    }

    .btn-adicionar-carrinho {
      background: var(--cor-secundaria);
      color: #000;
      border: none;
      padding: 15px 30px;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      transition: var(--transition);
      margin-top: 1rem;
      width: 100%;
      font-size: 1.1rem;
    }

    .btn-adicionar-carrinho:hover {
      background: #ffb347;
      transform: scale(1.02);
    }

    /* ====== CARRINHO ====== */
    .carrinho {
      padding: 4rem 2rem;
      background: var(--cor-terciaria);
      display: none;
      max-width: 800px;
      margin: 0 auto;
      border-radius: 10px;
    }

    .carrinho h3 {
      font-family: 'Bebas Neue', sans-serif;
      letter-spacing: 1px;
      color: var(--cor-secundaria);
      margin-bottom: 1.5rem;
      font-size: 1.5rem;
    }

    #listaCarrinho {
      list-style: none;
      margin-bottom: 1.5rem;
    }

    #listaCarrinho li {
      background: var(--cor-primaria);
      padding: 1rem;
      margin-bottom: 0.5rem;
      border-radius: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .btn-remover {
      background: #ff4444;
      color: white;
      border: none;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 1.2rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .btn-finalizar {
      background: var(--cor-secundaria);
      color: #000;
      border: none;
      padding: 15px 30px;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      transition: var(--transition);
      width: 100%;
      font-size: 1.1rem;
      margin-top: 1rem;
    }

    .btn-finalizar:hover {
      background: #ffb347;
      transform: scale(1.02);
    }

    /* ====== FORMUL√ÅRIO CLIENTE ====== */
    .form-cliente-container {
      padding: 4rem 2rem;
      background: var(--cor-primaria);
      display: none;
      max-width: 800px;
      margin: 0 auto;
      border-radius: 10px;
    }

    .form-cliente-container h3 {
      font-family: 'Bebas Neue', sans-serif;
      letter-spacing: 1px;
      color: var(--cor-secundaria);
      margin-bottom: 2rem;
      text-align: center;
      font-size: 1.5rem;
    }

    #formCliente {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .campo-texto,
    .campo-numero {
      padding: 12px;
      border: 2px solid var(--borda);
      border-radius: 8px;
      background: var(--cor-terciaria);
      color: var(--texto-claro);
      font-size: 1rem;
      transition: var(--transition);
    }

    .campo-texto:focus,
    .campo-numero:focus {
      outline: none;
      border-color: var(--cor-secundaria);
    }

    #btn-enviar-whatsapp {
      background: #25D366;
      color: white;
      border: none;
      padding: 15px 30px;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      transition: var(--transition);
      margin-top: 1rem;
      font-size: 1.1rem;
    }

    #btn-enviar-whatsapp:hover {
      background: #128C7E;
      transform: scale(1.02);
    }

    /* ====== MODAL DE CORES ====== */
    .modal-cores {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      justify-content: center;
      align-items: center;
      z-index: 9999;
    }

    .modal-conteudo {
      background: #1c1c1c;
      border-radius: 12px;
      padding: 25px;
      width: 90%;
      max-width: 800px;
      max-height: 80vh;
      overflow-y: auto;
      box-shadow: 0 0 20px rgba(249, 160, 27, 0.3);
    }

    .fechar-modal {
      float: right;
      font-size: 1.8rem;
      color: var(--cor-secundaria);
      cursor: pointer;
      transition: var(--transition);
    }

    .fechar-modal:hover {
      color: #fff;
    }

    .parte-personalizacao {
      margin-bottom: 20px;
      padding: 15px;
      background: #2a2a2a;
      border-radius: 8px;
    }

    .parte-titulo {
      color: var(--cor-secundaria);
      margin-bottom: 10px;
      font-size: 1.1rem;
    }

    .opcoes-materiais {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
      gap: 15px;
      margin-top: 10px;
    }

    .material-card {
      background: #333;
      border-radius: 10px;
      text-align: center;
      cursor: pointer;
      transition: var(--transition);
      padding: 10px;
      border: 2px solid transparent;
    }

    .material-card:hover {
      transform: scale(1.05);
      border-color: var(--cor-secundaria);
    }

    .material-card.selecionado {
      border-color: var(--cor-secundaria);
      box-shadow: 0 0 10px rgba(249, 160, 27, 0.5);
    }

    .material-card img {
      width: 100%;
      height: 80px;
      object-fit: cover;
      border-radius: 8px;
    }

    .material-card span {
      display: block;
      margin-top: 5px;
      font-size: 0.85rem;
      color: var(--texto-claro);
    }

    .btn-confirmar-cores {
      background: var(--cor-secundaria);
      color: #000;
      border: none;
      padding: 12px 20px;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      transition: var(--transition);
      margin-top: 20px;
      width: 100%;
    }

    .btn-confirmar-cores:hover {
      transform: scale(1.02);
      background: #ffb347;
    }

    .resumo-personalizacao {
      background: #2a2a2a;
      padding: 15px;
      border-radius: 8px;
      margin-top: 15px;
    }

    .resumo-item {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
      font-size: 0.9rem;
    }

    .resumo-item:last-child {
      margin-bottom: 0;
    }

    .seletor-chao {
      margin-top: 15px;
      padding: 10px;
      background: #333;
      border-radius: 8px;
    }

    .seletor-chao label {
      display: block;
      margin-bottom: 8px;
      color: var(--texto-claro);
    }

    .seletor-chao select {
      width: 100%;
      padding: 8px;
      border-radius: 6px;
      background: #2a2a2a;
      color: var(--texto-claro);
      border: 1px solid #444;
    }

    /* ====== MENSAGENS DE ERRO ====== */
    .mensagem-erro {
      color: #ff4444;
      font-size: 0.8rem;
      display: none;
      margin-top: 5px;
    }

    .campo-valido {
      border-left: 3px solid #4CAF50 !important;
    }

    .campo-invalido {
      border-left: 3px solid #f44336 !important;
    }

    /* ====== BOT√ÉO AJUDA ====== */
    #btn-ajuda {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: var(--cor-secundaria);
      color: #000;
      border: none;
      font-size: 1.2rem;
      font-weight: bold;
      cursor: pointer;
      z-index: 1000;
      transition: var(--transition);
    }

    #btn-ajuda:hover {
      transform: scale(1.1);
    }

    .popup-ajuda {
      display: none;
      position: fixed;
      bottom: 80px;
      right: 20px;
      background: var(--cor-terciaria);
      padding: 1rem;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      z-index: 1000;
      max-width: 200px;
    }

    .btn-whatsapp-ajuda {
      display: inline-block;
      background: #25D366;
      color: white;
      padding: 8px 15px;
      border-radius: 5px;
      text-decoration: none;
      margin-top: 0.5rem;
      text-align: center;
      transition: var(--transition);
    }

    .btn-whatsapp-ajuda:hover {
      background: #128C7E;
    }

    /* ====== RESPONSIVIDADE ====== */
    @media (max-width: 768px) {
      .menu-toggle {
        display: block;
      }

      .menu-links {
        display: none;
        position: absolute;
        top: 100%;
        left: 0;
        width: 100%;
        background: var(--cor-terciaria);
        flex-direction: column;
        padding: 1rem;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      }

      .menu-links.mostrar {
        display: flex;
      }

      .titulo-principal {
        font-size: 2rem;
      }

      .header-reduzido {
        padding: 100px 1rem 40px;
      }

      .carousel-section,
      #personalizacao-container,
      .carrinho,
      .form-cliente-container {
        padding: 2rem 1rem;
      }

      .form-grid {
        grid-template-columns: 1fr;
      }

      .opcoes-materiais {
        grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
      }
    }

    /* ====== SETAS DO CARROSSEL ====== */
    .swiper-button-prev,
    .swiper-button-next {
      color: var(--cor-secundaria);
      font-weight: bold;
      opacity: 0.4;
      transition: opacity 0.2s ease;
    }

    .swiper-button-prev:hover,
    .swiper-button-next:hover {
      color: var(--cor-secundaria);
      transform: scale(1.2);
      opacity: 1;
    }

    /* Ajustar tamanho */
    .swiper-button-prev,
    .swiper-button-next {
      width: auto;
      height: auto;
    }

    /* ====== CARROSSEL DE M√ÅQUINAS ====== */
    .maquinas-swiper {
      max-width: 1200px;
      margin: 0 auto;
    }

    .maquinas-swiper .swiper-slide {
      display: flex;
      justify-content: center;
    }

    /* Setas Maquinas icones */
    .maquinas-prev,
    .maquinas-next {
      color: var(--cor-secundaria);
      width: auto;
      height: auto;
      opacity: 0.4;
      transition: opacity 0.2s ease;
    }

    .maquinas-prev:hover,
    .maquinas-next:hover {
      color: var(--cor-secundaria);
      transform: scale(1.15);
      opacity: 1;
    }

    /* ====== BOT√ÉO CORTINA ====== */
    .btn-cortina {
      background: #444;
      color: var(--texto-claro);
      border: 2px dashed #666;
      padding: 15px;
      border-radius: 8px;
      cursor: pointer;
      transition: var(--transition);
      text-align: center;
      margin-top: 10px;
    }

    .btn-cortina:hover {
      background: #555;
      border-color: var(--cor-secundaria);
    }

    .cortina-selecionada {
      background: #333;
      border: 2px solid var(--cor-secundaria);
    }

    .preco-cortina {
      color: var(--cor-secundaria);
      font-size: 0.9rem;
      margin-top: 5px;
    }
  </style>
</head>

<body>

  <!-- üîù MENU FIXO RESPONSIVO -->
  <nav class="menu-topo">
    <div class="menu-logo">
      <!-- Logo placeholder - substitua pela sua logo -->
      <div>
        <img src="imagens/logo.png" class="logo-menu" alt="Logo"
          onerror="this.src='https://via.placeholder.com/40x40/ffb347/000?text=Logo'">
      </div>
      <span class="nome-site">Loja do Operador</span>
    </div>

    <div class="menu-toggle" id="menu-toggle">‚ò∞</div>

    <ul class="menu-links" id="menu-links">
      <li><a href="#home">Home</a></li>
      <li><a href="#kits">Kits</a></li>
      <li><a href="#contato">Contato</a></li>
    </ul>
  </nav>

  <!-- üè† CABE√áALHO -->
  <header id="home" class="header-reduzido">
    <h1 class="titulo-principal">INTERNAS PERSONALIZADA ENVIO PARA TODO BRASIL</h1>
    <p class="subtitulo-min">Escolha o kit ideal para sua m√°quina. Integra√ß√£o com WhatsApp para finalizar pedidos.</p>
  </header>

  <!-- ‚öôÔ∏è M√ÅQUINAS (AGORA √â CARROSSEL SWIPER) -->
  <section id="selecao-container" class="maquinas-container">
    <h2>Selecione sua m√°quina</h2>

    <div class="swiper maquinas-swiper">
      <div class="swiper-wrapper">

        <!-- Cada m√°quina virou um slide -->
        <div class="swiper-slide">
          <div class="maquina-item" data-maquina="Escavadeira">
            <div>
              <img src="imagens/icones/escavadeiraa.png" alt="Escavadeira">
            </div>
            <p>Escavadeira</p>
          </div>
        </div>

        <div class="swiper-slide">
          <div class="maquina-item" data-maquina="Retro-Escavadeira">
            <div>
              <img src="imagens/icones/retro-escavadeira.png" alt="Retro-Escavadeira">
            </div>
            <p>Retro-Escavadeira</p>
          </div>
        </div>

        <div class="swiper-slide">
          <div class="maquina-item" data-maquina="Pa-Carregadeira">
            <div>
              <img src="imagens/icones/pa-carregadeira.png" alt="Pa-Carregadeira">
            </div>
            <p>Pa-Carregadeira</p>
          </div>
        </div>

        <div class="swiper-slide">
          <div class="maquina-item" data-maquina="Moto-Niveladora">
            <div>
              <img src="imagens/icones/moto-niveladora.png" alt="Moto-Niveladora">
            </div>
            <p>Moto-Niveladora</p>
          </div>
        </div>

        <div class="swiper-slide">
          <div class="maquina-item" data-maquina="Trator-Esteira">
            <div>
              <img src="imagens/icones/trator-esteira.png" alt="Trator-Esteira">
            </div>
            <p>Trator-Esteira</p>
          </div>
        </div>

        <div class="swiper-slide">
          <div class="maquina-item" data-maquina="Trator">
            <div>
              <img src="imagens/icones/trator.png" alt="Trator">
            </div>
            <p>Trator</p>
          </div>
        </div>

        <div class="swiper-slide">
          <div class="maquina-item" data-maquina="Pulverizador">
            <div>
              <img src="imagens/icones/pulverizador.png" alt="Pulverizador">
            </div>
            <p>Pulverizador</p>
          </div>
        </div>

        <div class="swiper-slide">
          <div class="maquina-item" data-maquina="Colheitadeira">
            <div>
              <img src="imagens/icones/colheitadeira.png" alt="Colheitadeira">
            </div>
            <p>Colheitadeira</p>
          </div>
        </div>

        <div class="swiper-slide">
          <div class="maquina-item" data-maquina="Mini-Escavadeira">
            <div>
              <img src="imagens/icones/mini-escavadeira.png" alt="Mini-Escavadeira">
            </div>
            <p>Mini-Escavadeira</p>
          </div>
        </div>

        <div class="swiper-slide">
          <div class="maquina-item" data-maquina="Mini-Carregadeira">
            <div>
              <img src="imagens/icones/mini-carregadeira.png" alt="Mini-Carregadeira">
            </div>
            <p>Mini-Carregadeira</p>
          </div>
        </div>

      </div>

      <!-- SETAS DO CARROSSEL DAS M√ÅQUINAS -->
      <div class="swiper-button-prev maquinas-prev"></div>
      <div class="swiper-button-next maquinas-next"></div>

    </div>

    <!-- üÜï CAMPOS DE INFORMA√á√ïES DA M√ÅQUINA COM DROPDOWNS -->
    <div id="maquina-detalhes" class="maquina-detalhes">
      <h3>Informa√ß√µes da M√°quina</h3>
      <div class="form-grid">
        <select id="maquina-marca" required>
          <option value="">Selecione a Marca</option>
        </select>
        <div class="mensagem-erro" id="erro-maquina-marca">Por favor, selecione a marca</div>

        <select id="maquina-modelo" required>
          <option value="">Selecione o Modelo</option>
        </select>
        <div class="mensagem-erro" id="erro-maquina-modelo">Por favor, selecione o modelo</div>

        <select id="maquina-ano" required>
          <option value="">Selecione o Ano</option>
        </select>
        <div class="mensagem-erro" id="erro-maquina-ano">Por favor, selecione o ano</div>
      </div>
    </div>
  </section>

  <!-- üîÅ CARROSSEL DE KITS -->
  <section class="carousel-section" id="kits">
    <div class="swiper main-swiper">
      <div class="swiper-wrapper" id="slides-kits">
        <!-- Os slides ser√£o gerados dinamicamente pelo JavaScript -->
      </div>
      <div class="swiper-pagination"></div>
      <!-- üîΩ SETAS DE NAVEGA√á√ÉO -->
      <div class="swiper-button-prev"></div>
      <div class="swiper-button-next"></div>
    </div>
  </section>

  <!-- üé® PERSONALIZA√á√ÉO -->
  <section id="personalizacao-container">
    <h2>Personaliza√ß√£o do Kit</h2>
    <div id="partes-personalizacao"></div>
  </section>

  <!-- üõí CARRINHO -->
  <section class="carrinho">
    <h3>Seu Carrinho</h3>
    <ul id="listaCarrinho"></ul>
    <p><strong>Total:</strong> <span id="total-geral">R$ 0,00</span></p>
    <button class="btn-finalizar" id="btn-finalizar-pedido">Finalizar Pedido</button>
  </section>

  <!-- üìã FORMUL√ÅRIO DO CLIENTE -->
  <section id="form-cliente-container" class="form-cliente-container">
    <h3>üîí Preencha o Formul√°rio</h3>
    <form id="formCliente">
      <input type="text" id="nome" placeholder="Nome completo" required class="campo-texto">
      <div class="mensagem-erro" id="erro-nome">Por favor, insira apenas letras e espa√ßos</div>

      <input type="text" id="cpf_cnpj" placeholder="CPF ou CNPJ (apenas n√∫meros)" required class="campo-numero"
        inputmode="numeric" pattern="[0-9]*">
      <div class="mensagem-erro" id="erro-cpf_cnpj">Por favor, insira apenas n√∫meros</div>

      <input type="text" id="inscricao_estadual" placeholder="Inscri√ß√£o Estadual (apenas n√∫meros)" class="campo-numero"
        inputmode="numeric" pattern="[0-9]*">
      <div class="mensagem-erro" id="erro-inscricao_estadual">Por favor, insira apenas n√∫meros</div>

      <input type="text" id="telefone" placeholder="Telefone (apenas n√∫meros)" required class="campo-numero"
        inputmode="numeric" pattern="[0-9]*">
      <div class="mensagem-erro" id="erro-telefone">Por favor, insira apenas n√∫meros</div>

      <input type="text" id="cep" placeholder="CEP (apenas n√∫meros)" required class="campo-numero" inputmode="numeric"
        pattern="[0-9]*">
      <div class="mensagem-erro" id="erro-cep">Por favor, insira apenas n√∫meros</div>

      <input type="text" id="estado" placeholder="Estado" required class="campo-texto" maxlength="2">
      <div class="mensagem-erro" id="erro-estado">Por favor, insira apenas letras</div>

      <input type="text" id="cidade" placeholder="Cidade" required class="campo-texto">
      <div class="mensagem-erro" id="erro-cidade">Por favor, insira apenas letras e espa√ßos</div>

      <input type="text" id="bairro" placeholder="Bairro" required class="campo-texto">
      <div class="mensagem-erro" id="erro-bairro">Por favor, insira apenas letras e espa√ßos</div>

      <input type="text" id="rua" placeholder="Rua" required class="campo-texto">
      <div class="mensagem-erro" id="erro-rua">Por favor, insira apenas letras, n√∫meros e espa√ßos</div>

      <input type="text" id="numero" placeholder="N√∫mero" required class="campo-numero" inputmode="numeric"
        pattern="[0-9]*">
      <div class="mensagem-erro" id="erro-numero">Por favor, insira apenas n√∫meros</div>

      <button type="button" id="btn-enviar-whatsapp">üì¶ Enviar Pedido via WhatsApp</button>
    </form>
  </section>

  <!-- üé® MODAL DE CORES -->
  <div id="modal-cores" class="modal-cores">
    <div class="modal-conteudo">
      <span class="fechar-modal" id="fechar-modal">&times;</span>
      <h3 id="titulo-modal">Personalize seu Kit</h3>
      <div id="conteudo-modal"></div>
      <div class="resumo-personalizacao" id="resumo-personalizacao"></div>
      <button class="btn-confirmar-cores" id="confirmar-cores">Confirmar Sele√ß√£o</button>
    </div>
  </div>

  <!-- ‚òéÔ∏è AJUDA -->
  <button id="btn-ajuda">?</button>
  <div id="popup-ajuda" class="popup-ajuda">
    <p>Precisa de ajuda? Fale com a gente:</p>
    <a href="https://wa.me/5543999064226" class="btn-whatsapp-ajuda" target="_blank">WhatsApp</a>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
  <script>
    /* =====================================================
       DADOS DOS MATERIAIS E CORES
       ===================================================== */
    const materiais = {
      couro: {
        nome: "Couro Sint√©tico",
        cores: [
          { nome: "Preto Amarelo", imagem: "imagens/cores/pretoamarelo.jpg" },
          { nome: "Azul Marinho", imagem: "imagens/cores/azulmarinho.jpg" },
          { nome: "Couro Vermelho", imagem: "imagens/cores/courovermelho.jpg" },
          { nome: "Preto com Prata", imagem: "imagens/cores/pretocomprata.jpg" },
          { nome: "Preto com Vermelho", imagem: "imagens/cores/pretocomvermelho.jpg" },
          { nome: "Grafite com Grafite", imagem: "imagens/cores/grafitecomgrafite.jpg" },
          { nome: "Marrom Caf√©", imagem: "imagens/cores/marromcafe.jpg" },
          { nome: "Marrom Ferrari", imagem: "imagens/cores/marromferrari.jpg" },
          { nome: "Preto Mosaico", imagem: "imagens/cores/pretomosaico.jpg" },
          { nome: "Preto com Azul", imagem: "imagens/cores/pretocomazul.jpg" },
          { nome: "Bege com Marrom", imagem: "imagens/cores/begecommarrom.jpg" },
          { nome: "Corolla", imagem: "imagens/cores/corolla.jpg" },
          { nome: "Preto com Verde", imagem: "imagens/cores/pretocomverde.jpg" }
        ]
      },
      couro_sport: {
        nome: "Couro Sport",
        cores: [
          { nome: "Preto com Costuras Vermelhas", imagem: "imagens/cores/couromarrom.jpg" },
          { nome: "Azul Racing com Branco", imagem: "imagens/cores/courosportebege.jpg" },
          { nome: "Cinza Metalizado com Laranja", imagem: "imagens/cores/courosportecinzaclaro.jpg" },
          { nome: "Branco Gelado com Preto", imagem: "imagens/cores/courosportecinzaescuro.jpg" }
        ]
      },
      pelucia: {
        nome: "Pel√∫cia (Xinil)",
        cores: [
          { nome: "Grafite Mais Pelinhos", imagem: "imagens/cores/grafite2.jpg" },
          { nome: "Grafite", imagem: "imagens/cores/grafite.jpg" },
          { nome: "Preto Mais Pelinhos", imagem: "imagens/cores/preto2.jpg" },
          { nome: "Preto", imagem: "imagens/cores/preto.jpg" },
          { nome: "Azul Mais Pelinhos", imagem: "imagens/cores/azul.jpg" },
          { nome: "Mescla", imagem: "imagens/cores/mescla.jpg" },
          { nome: "Marrom", imagem: "imagens/cores/marrom.jpg" },
          { nome: "Vermelho Mais Pelinhos", imagem: "imagens/cores/vermelho.jpg" },
          { nome: "Amarelo Mais Pelinhos", imagem: "imagens/cores/amarelo.jpg" },
          { nome: "Verde Mais Pelinhos", imagem: "imagens/cores/verde.jpg" },
          { nome: "Rosa", imagem: "imagens/cores/rosa.jpg" },
          { nome: "Laranja", imagem: "imagens/cores/laranja.jpg" }
        ]
      }
    };

    // Defini√ß√£o dos kits de revestimento
    const kitsRevestimento = {
      "pelucia_total": {
        nome: "Kit todo na Pel√∫cia (Xinil)",
        descricao: "Todas as partes na pel√∫cia (Xinil)",
        preco: 850,
        imagem: "imagens/kits/kit_pelucia_total.jpg",
        partes: {
          kit: { material: "pelucia", cor: "", corNome: "" }
        }
      },
      "couro_chao_pelucia_resto": {
        nome: "Kit Couro no Ch√£o + Resto na Pel√∫cia (Xinil)",
        descricao: "Ch√£o, Pedais, e Sapateira em couro sint√©tico, demais partes em pel√∫cia (Xinil)",
        preco: 950,
        imagem: "imagens/kits/kit_couro_chao.jpg",
        partes: {
          chao: { material: "couro", cor: "", corNome: "" },
          kit: { material: "pelucia", cor: "", corNome: "" },
        }
      },
      "couro_total": {
        nome: "Couro sint√©tico Sport no ch√£o + restante na Pel√∫cia (Xinil)",
        descricao: "Ch√£o + pedais + sapateira em couro, restante do kit na pelucia (Xinil)",
        preco: 1000,
        imagem: "imagens/kits/kit_couro_total.jpg",
        partes: {
          chao: { material: "couro_sport", cor: "", corNome: "" },
          kit: { material: "pelucia", cor: "", corNome: "" },
        },
        opcaoChao: true
      },
      "couro_Suede": {
        nome: "Couro sint√©tico Sport no ch√£o + Banco no Sued",
        descricao: "Ch√£o + pedais em couro Sport, banco + apoio dos bra√ßos + apoio de cabe√ßa no Sued, restante na pelucia (Xinil)",
        preco: 1200,
        imagem: "imagens/kits/kit_Couro_suede.jpg",
        partes: {
          chao: { material: "couro_sport", cor: "", corNome: "" },
          kit: { material: "pelucia", cor: "", corNome: "" },
        },
        opcaoChao: true
      },
      "couro_sport": {
        nome: "Kit Couro sint√©tico no ch√£o nos pedais e na sapateira ",
        descricao: "Couro sint√©tico no ch√£o nos pedais e na sapateira , Sued no banco apoio de bra√ßos e apoio da cabe√ßa , restante na pel√∫cia (Xinil)",
        preco: 1150,
        imagem: "imagens/kits/kit_couro_sport.jpg",
        partes: {
          chao: { material: "couro_sport", cor: "", corNome: "", detalhe: "" },
          kit: { material: "pelucia", cor: "", corNome: "" },
        }
      }
    };

    /* =====================================================
       DADOS DAS M√ÅQUINAS (SIMPLIFICADO SEM LINHA)
       ===================================================== */
    const dadosMaquinas = {
      "Escavadeira": {
        "CAT": {
          "312D2L": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
          "313D2L": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
          "315D2L": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
          "318D2L": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
          "320D2L": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
          "323D2L": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
          "336D2L": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
          // Modelos GC (joystick el√©trico)
          "313GC": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
          "316GC": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
          "318GC": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
          "320GC": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
          "323GC": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
          "330GC": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
          "336GC": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
          "340GC": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
          "350GC": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] }
        },
        "HYUNDAI": {
          // Modelos LC7 (molde antigo at√© 2011)
          "140LC7": { anos: ["2008", "2009", "2010", "2011"] },
          "160LC7": { anos: ["2008", "2009", "2010", "2011"] },

          // Modelos LC9 (molde novo a partir de 2013)
          "140LC9": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
          "150LC9": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
          "160LC9": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
          "180LC9": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
          "200RLC9": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
          "225LC9": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
          "260LC9": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
          "350LC9": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
          "360LC9": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
          "150HX": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] }
          
        },
        "VOLVO": {
          // Modelos at√© 2013 (molde SDLG, banco grande)
          "140": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
          "200": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
          "210": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
          "220": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
          "240": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
          "360": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
          "460": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },

          // Modelos a partir de 2014 (banco grande)
          "140": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
          "200": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
          "210": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
          "220": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
          "240": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
          "360": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
          "460": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] }
        },
      
      "SDLG": {
        "LG6150": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
        "LG6225": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
        "LG6250": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] }
      },
      "KOMATSU": {
        "PC130": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
        "PC160": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
        "PC180": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
        "PC200": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
        "PC210": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
        "PC240": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
        "PC300": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
        "PC340": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
        "PC350": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
        "PC360": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
        "PC380": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
        "PC400": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
        "PC450": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
        "PC500": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] }
      },
      "JOHN DEERE": {
            "130G": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "130P": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "160G": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "160P": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "200G": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "210G": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "210P": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "250G": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "250P": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "350G": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "350P": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "470G": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "470P": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] }
        },
         "NEW HOLLAND": {
            "145C": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "175C": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "215C": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "245C": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "385C": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "405C": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "485C": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] }
        },
        "CASE": {
            "CX130": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "CX180": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "CX220": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "CX240": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "CX350": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "CX370": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "CX490": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "CX500": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "CX800": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] }
        },
        "LINK BELT": {
            "X3 2050": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "X3 3050": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] }
        },
         "ZOOMILION": {
            "ZE135E": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "ZE215E": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] }
        },
        "XCMG": {
            "XE150BR": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "XE180BR": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "XE215BR": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] }
        },
        "LIUGONG": {
            "913E": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "915E": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "922E": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] }
        },
        "JCB": {
            "JS130": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "JS160": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "JS180": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "JS200": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "JS210": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "JS220": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] }
        },
        "SANY": {
            "JS130": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "JS160": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "JS180": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "JS200": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "JS210": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "JS220": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] }
        },
        "DOOSAN": {
            "JS130": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "JS160": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "JS180": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "JS200": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "JS210": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "JS220": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] }
        },
        "LOVOL": {
            "JS130": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "JS160": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "JS180": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "JS200": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "JS210": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
            "JS220": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] }
        }
          },

      "Retro-Escavadeira": {
        "CAT": {
          "416D": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
          "420D": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] }
        },
        "JCB": {
          "3CX": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] }
        }
      },
      "Pa-Carregadeira": {
        "CAT": {
          "916M": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] },
          "926M": { anos: ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"] }
        }
      }
    };

    // VALOR DA CORTINA
    const PRECO_CORTINA = 300;

    let carrinho = [];
    let maquinaSelecionada = "";
    let kitAtual = null;
    let personalizacaoAtual = {};
    let cortinaSelecionada = null;

    /* =====================================================
       INICIALIZA√á√ÉO
       ===================================================== */
    document.addEventListener("DOMContentLoaded", () => {
      inicializarSite();
    });

    function inicializarSite() {
      gerarCarrosselKits();
      configurarSelecaoMaquina();
      configurarEventListeners();
    }

    function configurarEventListeners() {
      // Popup ajuda
      const btnAjuda = document.getElementById("btn-ajuda");
      const popup = document.getElementById("popup-ajuda");
      btnAjuda.addEventListener("click", () => {
        popup.style.display = popup.style.display === "block" ? "none" : "block";
      });

      // Menu hamburguer
      const menuToggle = document.getElementById("menu-toggle");
      const menuLinks = document.getElementById("menu-links");
      menuToggle.addEventListener("click", () => {
        menuLinks.classList.toggle("mostrar");
      });

      // Fechar modal
      document.getElementById("fechar-modal").addEventListener("click", fecharModal);

      // Fechar modal ao clicar fora
      window.addEventListener("click", function (event) {
        const modal = document.getElementById("modal-cores");
        if (event.target === modal) {
          fecharModal();
        }
      });

      // Bot√£o confirmar cores
      document.getElementById("confirmar-cores").addEventListener("click", confirmarCores);

      // Bot√£o finalizar pedido
      document.getElementById("btn-finalizar-pedido").addEventListener("click", mostrarFormularioCliente);

      // Bot√£o enviar WhatsApp
      document.getElementById("btn-enviar-whatsapp").addEventListener("click", validarFormulario);

      // Event listeners para os dropdowns
      document.getElementById('maquina-marca').addEventListener('change', atualizarModelos);
      document.getElementById('maquina-modelo').addEventListener('change', atualizarAnos);
    }

    /* =====================================================
       SISTEMA DE DROPDOWNS PARA M√ÅQUINAS (SEM LINHA)
       ===================================================== */
    function atualizarDropdowns() {
      const marcaSelect = document.getElementById('maquina-marca');
      const modeloSelect = document.getElementById('maquina-modelo');
      const anoSelect = document.getElementById('maquina-ano');

      // Limpar dropdowns
      marcaSelect.innerHTML = '<option value="">Selecione a Marca</option>';
      modeloSelect.innerHTML = '<option value="">Selecione o Modelo</option>';
      anoSelect.innerHTML = '<option value="">Selecione o Ano</option>';

      if (!maquinaSelecionada || !dadosMaquinas[maquinaSelecionada]) {
        return;
      }

      // Preencher marcas
      const marcas = Object.keys(dadosMaquinas[maquinaSelecionada]);
      marcas.forEach(marca => {
        marcaSelect.innerHTML += `<option value="${marca}">${marca}</option>`;
      });
    }

    function atualizarModelos() {
      const marca = document.getElementById('maquina-marca').value;
      const modeloSelect = document.getElementById('maquina-modelo');
      const anoSelect = document.getElementById('maquina-ano');

      // Limpar dropdown dependente
      anoSelect.innerHTML = '<option value="">Selecione o Ano</option>';

      if (!marca || !dadosMaquinas[maquinaSelecionada] || !dadosMaquinas[maquinaSelecionada][marca]) {
        modeloSelect.innerHTML = '<option value="">Selecione o Modelo</option>';
        return;
      }

      // Preencher modelos
      const modelos = Object.keys(dadosMaquinas[maquinaSelecionada][marca]);
      modeloSelect.innerHTML = '<option value="">Selecione o Modelo</option>';
      modelos.forEach(modelo => {
        modeloSelect.innerHTML += `<option value="${modelo}">${modelo}</option>`;
      });
    }

    function atualizarAnos() {
      const marca = document.getElementById('maquina-marca').value;
      const modelo = document.getElementById('maquina-modelo').value;
      const anoSelect = document.getElementById('maquina-ano');

      if (!marca || !modelo || !dadosMaquinas[maquinaSelecionada] ||
        !dadosMaquinas[maquinaSelecionada][marca] || !dadosMaquinas[maquinaSelecionada][marca][modelo]) {
        anoSelect.innerHTML = '<option value="">Selecione o Ano</option>';
        return;
      }

      // Preencher anos
      const anos = dadosMaquinas[maquinaSelecionada][marca][modelo].anos;
      anoSelect.innerHTML = '<option value="">Selecione o Ano</option>';
      anos.forEach(ano => {
        anoSelect.innerHTML += `<option value="${ano}">${ano}</option>`;
      });
    }

    /* =====================================================
       CARROSSEL DE KITS
       ===================================================== */
    function gerarCarrosselKits() {
      const slidesContainer = document.getElementById("slides-kits");
      slidesContainer.innerHTML = "";

      Object.entries(kitsRevestimento).forEach(([key, kit]) => {
        slidesContainer.innerHTML += `
          <div class="swiper-slide" data-kit="${key}">
            <div class="slide-content">
              <img src="${kit.imagem}" alt="${kit.nome}" class="slide-img" loading="lazy">
              <div class="slide-caption">
                <h3>${kit.nome}</h3>
                <p>${kit.descricao}</p>
                <strong style="color:#f9a01b">R$ ${kit.preco.toFixed(2)}</strong><br>
                <button class="btn-selecionar-kit" data-kit="${key}">
                  Selecionar Este Kit
                </button>
              </div>
            </div>
          </div>
        `;
      });

      const swiper = new Swiper(".main-swiper", {
        loop: true,
        slidesPerView: 1,
        spaceBetween: 20,
        centeredSlides: false,
        pagination: { el: ".swiper-pagination", clickable: true },
        navigation: {
          nextEl: ".swiper-button-next",
          prevEl: ".swiper-button-prev",
        },
        autoplay: {
          delay: 4000,
          disableOnInteraction: false
        },
        breakpoints: {
          768: {
            slidesPerView: 2
          },
          1024: {
            slidesPerView: 3
          }
        }
      });

      const maquinasSwiper = new Swiper(".maquinas-swiper", {
        loop: true,
        slidesPerView: 1,
        spaceBetween: 20,
        centeredSlides: true,
        navigation: {
          nextEl: ".maquinas-next",
          prevEl: ".maquinas-prev",
        },
        breakpoints: {
          768: { slidesPerView: 4, spaceBetween: 20 },
          1024: { slidesPerView: 5, spaceBetween: 30 }
        }
      });

      // Clique no bot√£o ou slide
      document.querySelectorAll(".btn-selecionar-kit").forEach((btn) => {
        btn.addEventListener("click", (e) => {
          e.stopPropagation();
          selecionarKit(btn.dataset.kit);
        });
      });

      document.querySelectorAll(".swiper-slide").forEach((slide) => {
        slide.addEventListener("click", (e) => {
          const kitKey = slide.dataset.kit;
          selecionarKit(kitKey);
        });
      });
    }

    /* =====================================================
       SELE√á√ÉO DE M√ÅQUINA
       ===================================================== */
    function configurarSelecaoMaquina() {
      const itensMaquina = document.querySelectorAll('.maquina-item');

      itensMaquina.forEach(item => {
        item.addEventListener('click', function () {
          // Remove sele√ß√£o anterior
          itensMaquina.forEach(i => i.classList.remove('selecionado'));

          // Adiciona sele√ß√£o atual
          this.classList.add('selecionado');

          // Atualiza m√°quina selecionada
          maquinaSelecionada = this.dataset.maquina;

          // Mostra se√ß√£o de detalhes da m√°quina
          document.getElementById("maquina-detalhes").style.display = "block";

          // Atualiza dropdowns
          atualizarDropdowns();
        });
      });
    }

    /* =====================================================
       SELE√á√ÉO DE KIT
       ===================================================== */
    function selecionarKit(chave) {
      // Verificar se m√°quina foi selecionada
      if (!maquinaSelecionada) {
        alert("Por favor, selecione uma m√°quina primeiro!");
        document.getElementById("selecao-container").scrollIntoView({ behavior: "smooth" });
        return;
      }

      // Verificar se dados da m√°quina foram preenchidos
      const marca = document.getElementById("maquina-marca").value;
      const modelo = document.getElementById("maquina-modelo").value;
      const ano = document.getElementById("maquina-ano").value;

      if (!marca || !modelo || !ano) {
        alert("Por favor, preencha todos os dados da m√°quina (marca, modelo e ano)!");
        return;
      }

      const kit = kitsRevestimento[chave];
      if (!kit) return;

      kitAtual = { ...kit, chave: chave };
      personalizacaoAtual = JSON.parse(JSON.stringify(kit.partes));
      cortinaSelecionada = null; // Resetar cortina

      // MOSTRAR MODAL DE PERSONALIZA√á√ÉO
      mostrarModalPersonalizacao();
    }

    /* =====================================================
       PERSONALIZA√á√ÉO (MODAL) - CORRIGIDO
       ===================================================== */
    function mostrarModalPersonalizacao() {
      const modal = document.getElementById("modal-cores");
      const conteudoModal = document.getElementById("conteudo-modal");

      conteudoModal.innerHTML = "";

      document.getElementById("titulo-modal").textContent = `Personalize: ${kitAtual.nome}`;

      // Gerar se√ß√µes para cada parte do kit
      Object.entries(personalizacaoAtual).forEach(([parte, config]) => {
        const material = materiais[config.material];
        if (!material) return;

        const parteDiv = document.createElement("div");
        parteDiv.className = "parte-personalizacao";

        parteDiv.innerHTML = `
          <div class="parte-titulo">${obterNomeParte(parte)} - ${material.nome}</div>
          <div class="opcoes-materiais" id="opcoes-${parte}"></div>
        `;

        conteudoModal.appendChild(parteDiv);

        // Gerar op√ß√µes de cores
        const opcoesDiv = document.getElementById(`opcoes-${parte}`);
        material.cores.forEach(cor => {
          const corCard = document.createElement("div");
          corCard.className = "material-card";
          corCard.dataset.parte = parte;
          corCard.dataset.cor = cor.nome;
          corCard.dataset.imagem = cor.imagem;

          corCard.innerHTML = `
            <img src="${cor.imagem}" alt="${cor.nome}" onerror="this.src='https://via.placeholder.com/120x80/333/fff?text=Imagem+N√£o+Encontrada'">
            <span>${cor.nome}</span>
          `;

          // CORRE√á√ÉO: Usar fun√ß√£o an√¥nima para capturar cor corretamente
          corCard.addEventListener("click", function () {
            selecionarCor(parte, this.dataset.cor, this.dataset.imagem);
          });

          // Marcar como selecionado se j√° tiver cor selecionada
          if (config.corNome === cor.nome) {
            corCard.classList.add("selecionado");
          }

          opcoesDiv.appendChild(corCard);
        });
      });

      // Seletor de tipo de ch√£o se necess√°rio
      if (kitAtual.opcaoChao) {
        const seletorChao = document.createElement("div");
        seletorChao.className = "seletor-chao";
        seletorChao.innerHTML = `
          <label for="tipo-chao">Tipo do Ch√£o:</label>
          <select id="tipo-chao" onchange="atualizarTipoChao(this.value)">
            <option value="couro_sport">Couro Sport</option>
            <option value="couro">Couro Sint√©tico</option>
          </select>
        `;
        conteudoModal.appendChild(seletorChao);
      }

      // BOT√ÉO PARA CORTINA (OPCIONAL) COM PRE√áO
      const cortinaDiv = document.createElement("div");
      cortinaDiv.className = "parte-personalizacao";
      cortinaDiv.innerHTML = `
        <div class="parte-titulo">Cortina (Opcional) <span class="preco-cortina">+ R$ ${PRECO_CORTINA},00</span></div>
        <div class="btn-cortina ${cortinaSelecionada ? 'cortina-selecionada' : ''}" id="btn-cortina">
          ${cortinaSelecionada ? `Cortina Selecionada: ${cortinaSelecionada}` : 'Clique para escolher a cortina (Xinil)'}
        </div>
      `;
      conteudoModal.appendChild(cortinaDiv);

      // Event listener para o bot√£o da cortina
      document.getElementById('btn-cortina').addEventListener('click', abrirModalCortina);

      modal.style.display = "flex";
      atualizarResumoPersonalizacao();
    }

    function abrirModalCortina() {
      const modal = document.getElementById("modal-cores");
      const conteudoModal = document.getElementById("conteudo-modal");

      conteudoModal.innerHTML = "";

      document.getElementById("titulo-modal").textContent = `Selecione a Cortina (Xinil) - + R$ ${PRECO_CORTINA},00`;

      const material = materiais["pelucia"];
      if (!material) return;

      const parteDiv = document.createElement("div");
      parteDiv.className = "parte-personalizacao";

      parteDiv.innerHTML = `
        <div class="parte-titulo">Cortina - ${material.nome} <span class="preco-cortina">+ R$ ${PRECO_CORTINA},00</span></div>
        <div class="opcoes-materiais" id="opcoes-cortina"></div>
      `;

      conteudoModal.appendChild(parteDiv);

      // Gerar op√ß√µes de cores da cortina (usando as cores do Xinil)
      const opcoesDiv = document.getElementById(`opcoes-cortina`);
      material.cores.forEach(cor => {
        const corCard = document.createElement("div");
        corCard.className = "material-card";
        corCard.dataset.cor = cor.nome;
        corCard.dataset.imagem = cor.imagem;

        corCard.innerHTML = `
          <img src="${cor.imagem}" alt="${cor.nome}" onerror="this.src='https://via.placeholder.com/120x80/333/fff?text=Imagem+N√£o+Encontrada'">
          <span>${cor.nome}</span>
        `;

        // CORRE√á√ÉO: Usar fun√ß√£o an√¥nima para capturar cor corretamente
        corCard.addEventListener("click", function () {
          selecionarCortina(this.dataset.cor, this.dataset.imagem);
        });

        // Marcar como selecionado se j√° tiver cortina selecionada
        if (cortinaSelecionada === cor.nome) {
          corCard.classList.add("selecionado");
        }

        opcoesDiv.appendChild(corCard);
      });

      // Bot√£o para voltar
      const btnVoltar = document.createElement("button");
      btnVoltar.className = "btn-confirmar-cores";
      btnVoltar.textContent = "Voltar para Personaliza√ß√£o";
      btnVoltar.onclick = mostrarModalPersonalizacao;
      conteudoModal.appendChild(btnVoltar);
    }

    function selecionarCortina(corNome, corImagem) {
      cortinaSelecionada = corNome;
      mostrarModalPersonalizacao(); // Volta para o modal principal
    }

    function obterNomeParte(parte) {
      const nomes = {
        kit: "Xinil",
        chao: "Ch√£o Pedais Sapateira"
      };
      return nomes[parte] || parte;
    }

    // CORRE√á√ÉO: Fun√ß√£o selecionarCor corrigida
    function selecionarCor(parte, corNome, corImagem) {
      personalizacaoAtual[parte].cor = corImagem;
      personalizacaoAtual[parte].corNome = corNome;

      const cards = document.querySelectorAll(`[data-parte="${parte}"]`);
      cards.forEach(card => {
        card.classList.remove("selecionado");
        // CORRE√á√ÉO: Usar corNome em vez de cor.nome (que n√£o existe)
        if (card.dataset.cor === corNome) {
          card.classList.add("selecionado");
        }
      });

      atualizarResumoPersonalizacao();
    }

    function atualizarTipoChao(tipo) {
      if (personalizacaoAtual.chao) {
        personalizacaoAtual.chao.material = tipo;

        const opcoesChao = document.getElementById("opcoes-chao");
        opcoesChao.innerHTML = "";

        const material = materiais[tipo];
        material.cores.forEach(cor => {
          const corCard = document.createElement("div");
          corCard.className = "material-card";
          corCard.dataset.parte = "chao";
          corCard.dataset.cor = cor.nome;
          corCard.dataset.imagem = cor.imagem;

          corCard.innerHTML = `
            <img src="${cor.imagem}" alt="${cor.nome}" onerror="this.src='https://via.placeholder.com/120x80/333/fff?text=Imagem+N√£o+Encontrada'">
            <span>${cor.nome}</span>
          `;

          corCard.addEventListener("click", function () {
            selecionarCor("chao", this.dataset.cor, this.dataset.imagem);
          });
          opcoesChao.appendChild(corCard);
        });

        personalizacaoAtual.chao.cor = "";
        personalizacaoAtual.chao.corNome = "";
      }
    }

    function atualizarResumoPersonalizacao() {
      const resumo = document.getElementById("resumo-personalizacao");
      resumo.innerHTML = "<strong>Resumo da Personaliza√ß√£o:</strong>";

      Object.entries(personalizacaoAtual).forEach(([parte, config]) => {
        if (config.corNome) {
          const item = document.createElement("div");
          item.className = "resumo-item";
          item.innerHTML = `
            <span>${obterNomeParte(parte)}:</span>
            <span>${config.corNome}</span>
          `;
          resumo.appendChild(item);
        }
      });

      // Adicionar cortina ao resumo se selecionada
      if (cortinaSelecionada) {
        const item = document.createElement("div");
        item.className = "resumo-item";
        item.innerHTML = `
          <span>Cortina:</span>
          <span>${cortinaSelecionada} (+ R$ ${PRECO_CORTINA},00)</span>
        `;
        resumo.appendChild(item);
      }
    }

    function confirmarCores() {
      // Verificar se todas as partes obrigat√≥rias foram personalizadas
      const partesObrigatorias = Object.entries(personalizacaoAtual)
        .filter(([parte, config]) => !config.corNome)
        .map(([parte, config]) => obterNomeParte(parte));

      if (partesObrigatorias.length > 0) {
        alert(`Por favor, selecione cores para: ${partesObrigatorias.join(", ")}`);
        return;
      }

      fecharModal();
      continuarFluxoAposPersonalizacao();
    }

    function fecharModal() {
      document.getElementById("modal-cores").style.display = "none";
    }

    function continuarFluxoAposPersonalizacao() {
      // Mostrar se√ß√µes seguintes
      document.getElementById("personalizacao-container").style.display = "block";
      document.querySelector(".carrinho").style.display = "block";

      // Calcular pre√ßo total (kit + cortina se selecionada)
      let precoTotal = kitAtual.preco;
      if (cortinaSelecionada) {
        precoTotal += PRECO_CORTINA;
      }

      // Atualizar resumo na se√ß√£o de personaliza√ß√£o
      const partesDiv = document.getElementById("partes-personalizacao");
      let cortinaHTML = '';

      if (cortinaSelecionada) {
        cortinaHTML = `
          <div class="resumo-item">
            <span>Cortina:</span>
            <span>${cortinaSelecionada} (+ R$ ${PRECO_CORTINA},00)</span>
          </div>
        `;
      }

      partesDiv.innerHTML = `
        <p><strong>${kitAtual.nome}</strong></p>
        <p style="color:#ccc">${kitAtual.descricao}</p>
        <div class="resumo-personalizacao">
          <strong>Personaliza√ß√£o Selecionada:</strong>
          ${Object.entries(personalizacaoAtual).map(([parte, config]) =>
        `<div class="resumo-item">
              <span>${obterNomeParte(parte)}:</span>
              <span>${config.corNome}</span>
            </div>`
      ).join('')}
          ${cortinaHTML}
        </div>
        <p><strong>Pre√ßo: R$ ${precoTotal.toFixed(2)}</strong></p>
        <input type="hidden" id="kit-selecionado-chave" value="${kitAtual.chave}">
        <button class="btn-adicionar-carrinho" onclick="adicionarAoCarrinho()">Adicionar ao Carrinho</button>
      `;

      // Rolagem suave para a personaliza√ß√£o
      document.getElementById("personalizacao-container").scrollIntoView({ behavior: "smooth" });
    }

    /* =====================================================
       CARRINHO
       ===================================================== */
    function adicionarAoCarrinho() {
      if (!kitAtual) return alert("Selecione um kit primeiro!");

      const existeNoCarrinho = carrinho.some(item => item.chave === kitAtual.chave);
      if (!existeNoCarrinho) {
        // Calcular pre√ßo total (kit + cortina se selecionada)
        let precoTotal = kitAtual.preco;
        if (cortinaSelecionada) {
          precoTotal += PRECO_CORTINA;
        }

        carrinho.push({
          chave: kitAtual.chave,
          nome: kitAtual.nome,
          preco: precoTotal, // Pre√ßo j√° inclui a cortina se selecionada
          precoBase: kitAtual.preco,
          descricao: kitAtual.descricao,
          personalizacao: { ...personalizacaoAtual },
          cortina: cortinaSelecionada,
          precoCortina: cortinaSelecionada ? PRECO_CORTINA : 0
        });
        atualizarCarrinho();
        alert("Kit personalizado adicionado ao carrinho!");
      } else {
        alert("Este kit j√° est√° no carrinho!");
      }
    }

    function atualizarCarrinho() {
      const lista = document.getElementById("listaCarrinho");
      lista.innerHTML = "";
      let total = 0;

      carrinho.forEach((kit, index) => {
        let itemTexto = `${kit.nome} - R$ ${kit.preco.toFixed(2)}`;

        // Adicionar informa√ß√£o da cortina se houver
        if (kit.cortina) {
          itemTexto += ` (inclui cortina: +R$ ${PRECO_CORTINA},00)`;
        }

        lista.innerHTML += `
          <li>
            ${itemTexto}
            <button class="btn-remover" onclick="removerDoCarrinho(${index})">√ó</button>
          </li>
        `;
        total += kit.preco;
      });

      document.getElementById("total-geral").textContent = `R$ ${total.toFixed(2)}`;
    }

    function removerDoCarrinho(index) {
      carrinho.splice(index, 1);
      atualizarCarrinho();
    }

    /* =====================================================
       FORMUL√ÅRIO E WHATSAPP
       ===================================================== */
    function mostrarFormularioCliente() {
      if (carrinho.length === 0) {
        alert("Adicione pelo menos um kit ao carrinho antes de finalizar!");
        return;
      }

      if (!maquinaSelecionada) {
        alert("Selecione uma m√°quina antes de finalizar!");
        return;
      }

      document.getElementById("form-cliente-container").style.display = "block";
      document.getElementById("form-cliente-container").scrollIntoView({ behavior: "smooth" });
    }

    function validarFormulario() {
      // Limpar mensagens de erro
      document.querySelectorAll('.mensagem-erro').forEach(el => {
        el.style.display = 'none';
      });

      // Validar campos
      const nome = document.getElementById('nome').value;
      const cpf_cnpj = document.getElementById('cpf_cnpj').value;
      const telefone = document.getElementById('telefone').value;
      const cep = document.getElementById('cep').value;
      const estado = document.getElementById('estado').value;
      const cidade = document.getElementById('cidade').value;
      const bairro = document.getElementById('bairro').value;
      const rua = document.getElementById('rua').value;
      const numero = document.getElementById('numero').value;

      let valido = true;

      // Valida√ß√£o de nome (apenas letras e espa√ßos)
      if (!/^[A-Za-z√Ä-√ø\s]+$/.test(nome)) {
        document.getElementById('erro-nome').style.display = 'block';
        valido = false;
      }

      // Valida√ß√£o de CPF/CNPJ (apenas n√∫meros)
      if (!/^\d+$/.test(cpf_cnpj)) {
        document.getElementById('erro-cpf_cnpj').style.display = 'block';
        valido = false;
      }

      // Valida√ß√£o de telefone (apenas n√∫meros)
      if (!/^\d+$/.test(telefone)) {
        document.getElementById('erro-telefone').style.display = 'block';
        valido = false;
      }

      // Valida√ß√£o de CEP (apenas n√∫meros)
      if (!/^\d+$/.test(cep)) {
        document.getElementById('erro-cep').style.display = 'block';
        valido = false;
      }

      // Valida√ß√£o de estado (apenas letras)
      if (!/^[A-Za-z√Ä-√ø]+$/.test(estado)) {
        document.getElementById('erro-estado').style.display = 'block';
        valido = false;
      }

      // Valida√ß√£o de cidade (apenas letras e espa√ßos)
      if (!/^[A-Za-z√Ä-√ø\s]+$/.test(cidade)) {
        document.getElementById('erro-cidade').style.display = 'block';
        valido = false;
      }

      // Valida√ß√£o de bairro (apenas letras e espa√ßos)
      if (!/^[A-Za-z√Ä-√ø\s]+$/.test(bairro)) {
        document.getElementById('erro-bairro').style.display = 'block';
        valido = false;
      }

      // Valida√ß√£o de rua (letras, n√∫meros e espa√ßos)
      if (!/^[A-Za-z√Ä-√ø0-9\s]+$/.test(rua)) {
        document.getElementById('erro-rua').style.display = 'block';
        valido = false;
      }

      // Valida√ß√£o de n√∫mero (apenas n√∫meros)
      if (!/^\d+$/.test(numero)) {
        document.getElementById('erro-numero').style.display = 'block';
        valido = false;
      }

      if (valido) {
        enviarParaWhatsApp();
      }
    }

    function enviarParaWhatsApp() {
      const marca = document.getElementById("maquina-marca").value;
      const modelo = document.getElementById("maquina-modelo").value;
      const ano = document.getElementById("maquina-ano").value;

      let mensagem = `*NOVO PEDIDO - LOJA DO OPERADOR*%0A%0A`;

      // Dados da m√°quina
      mensagem += `*M√ÅQUINA:*%0A`;
      mensagem += `Tipo: ${maquinaSelecionada}%0A`;
      mensagem += `Marca: ${marca}%0A`;
      mensagem += `Modelo: ${modelo}%0A`;
      mensagem += `Ano: ${ano}%0A%0A`;

      // Itens do carrinho
      mensagem += `*ITENS DO PEDIDO:*%0A`;
      carrinho.forEach((kit, index) => {
        mensagem += `${index + 1}. ${kit.nome} - R$ ${kit.preco.toFixed(2)}%0A`;

        // Personaliza√ß√£o
        Object.entries(kit.personalizacao).forEach(([parte, config]) => {
          if (config.corNome) {
            mensagem += `   ${obterNomeParte(parte)}: ${config.corNome}%0A`;
          }
        });

        // Cortina se selecionada
        if (kit.cortina) {
          mensagem += `   Cortina: ${kit.cortina} (+ R$ ${PRECO_CORTINA},00)%0A`;
        }

        mensagem += `%0A`;
      });

      // Total
      const total = carrinho.reduce((sum, kit) => sum + kit.preco, 0);
      mensagem += `*TOTAL: R$ ${total.toFixed(2)}*%0A%0A`;

      // Dados do cliente
      mensagem += `*DADOS DO CLIENTE:*%0A`;
      mensagem += `Nome: ${document.getElementById('nome').value}%0A`;
      mensagem += `CPF/CNPJ: ${document.getElementById('cpf_cnpj').value}%0A`;

      const inscricaoEstadual = document.getElementById('inscricao_estadual').value;
      if (inscricaoEstadual) {
        mensagem += `Inscri√ß√£o Estadual: ${inscricaoEstadual}%0A`;
      }

      mensagem += `Telefone: ${document.getElementById('telefone').value}%0A`;
      mensagem += `CEP: ${document.getElementById('cep').value}%0A`;
      mensagem += `Estado: ${document.getElementById('estado').value}%0A`;
      mensagem += `Cidade: ${document.getElementById('cidade').value}%0A`;
      mensagem += `Bairro: ${document.getElementById('bairro').value}%0A`;
      mensagem += `Rua: ${document.getElementById('rua').value}%0A`;
      mensagem += `N√∫mero: ${document.getElementById('numero').value}%0A`;

      // N√∫mero do WhatsApp (substitua pelo seu n√∫mero)
      const telefoneWhatsApp = "5543999064226";

      // Abrir WhatsApp
      const url = `https://wa.me/${telefoneWhatsApp}?text=${mensagem}`;
      window.open(url, '_blank');

      // Limpar carrinho ap√≥s envio
      carrinho = [];
      atualizarCarrinho();
      alert("Pedido enviado para o WhatsApp! Em breve entraremos em contato.");
    }
  </script>
</body>

</html>